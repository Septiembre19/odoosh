<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<record id="electronic_invoice_fields_inherit_form" model="ir.ui.view">
			<field name="name">electronic.invoice.fields.inherit.form</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form" />
			<field name="arch" type="xml">
				<xpath expr="//header" position="inside">
					<button confirm="¿Seguro que desea continuar?" attrs="{'invisible':['|','|','|','|','|','|','|',('is_company_config','=', False),('state','!=','posted'),('pagadoCompleto','=','FECompletada'),('pagadoCompleto','=','Finalizado'),('move_type','=','in_invoice'), ('move_type','=','out_refund'), ('move_type','=','entry'), ('move_type','=','in_refund')]}" style="border: solid 1px;background: #7c7bad;color: white;" name="get_connection" string="Generar Factura Electrónica" type="object" />
				</xpath>
				<xpath expr="//field[@name='move_type']" position="before">
					<field name="is_company_config" invisible="1" />
				</xpath>

				<xpath expr="//header" position="inside">
					<button confirm="¿Seguro que desea continuar?" attrs="{'invisible':['|','|','|','|','|','|',('is_company_config','=', False),('state','!=','posted'),('pagadoCompleto','=','FECompletada'),('pagadoCompleto','=','Finalizado'),('move_type','=','in_invoice'), ('move_type','=','out_invoice'), ('move_type','=','entry')]}" style="border: solid 1px;background: #7c7bad;color: white;" name="get_connection" string="Informar Nota de Crédito FE" type="object" />
				</xpath>
<!--
				<xpath expr="//header" position="inside">
					<button confirm="¿Seguro que desea continuar?" attrs="{'invisible':['|','|','|','|','|','|','|','|','|','|',('is_company_config','=', False),('payment_state','=','not_paid'),('state','=','post'),('state','=','draft'),('payment_state','=','reversed'),('pagadoCompleto','=','FECompletada'),('pagadoCompleto','=','Finalizado'),('move_type','=','in_invoice'), ('move_type','=','out_invoice'),('move_type','=','entry'),('move_type','=','in_refund')]}" style="border: solid 1px;background: #7c7bad;color: white;" name="get_connection_reembolso" string="Informar Reembolso FE" type="object" />
				</xpath>
-->
				<xpath expr="//header" position="inside">
					<button attrs="{'invisible':['|','|','|','|',('is_company_config','=', False),('pagadoCompleto','!=','FECompletada'),('pagadoCompleto','=','Finalizado'),('move_type','=','in_invoice'),('state','=','draft')]}" style="border: solid 1px;background: #7c7bad;color: white;" name="get_pdf_token" string="Ver Documento Eléctrónico" type="object" />
				</xpath>

				<xpath expr="//button[@name='button_draft']" position="attributes">
					<attribute name="attrs">{'invisible': [('pagadoCompleto','=','FECompletada')]}</attribute>
				</xpath>

				<xpath expr="//field[@name='move_type']" position="before">
					<field name="qr_code" widget='image' attrs="{'invisible':['|','|',('pdfNumber','=',False),('move_type','=','in_invoice'),('state','=','draft')]}" class="oe_avatar" />
				</xpath>

				<xpath expr="//field[@name='journal_id']" position="after">

					<field name="puntoFactFiscal" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
					<field name="pagadoCompleto" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
					<!--<field name="reembolso" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}"/>		 -->
					<field name="anulado" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
					<field name="nota_credito" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />


					<!-- 	<field name="pagadoCompleto" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />	 -->
				</xpath>
				<!-- header_left_group -->
				<!-- <xpath expr="//group[@id='header_right_group']" position="after" >	 attrs="{'readonly':[('payment_state','=','paid')]}"			 -->
				<!-- <xpath expr="/form/sheet/group" position="after" >		other_info		 -->
				<!-- type -->
				<xpath expr="//page[@name='other_info']" position="after">
					<page name="pageConfigFE" string="Configuración FE" attrs="{'invisible':['|', ('move_type','in',('in_invoice','entry')), ('is_company_config','=', False)]}">
						<group name="fe-group" string="Datos FE">
							<group name="left_g" string="">
								<field name="tipo_documento_fe" />
								<field name="tipo_emision_fe" />
								<field name="naturaleza_operacion_fe" />
								<field name="tipo_operacion_fe" />
								<field name="destino_operacion_fe" />
								<field name="tipoVenta_fe" />
								<field name="reversal_reason_fe" />
								<!--<field name="pagadoCompleto" />-->
								<field name="lastFiscalNumber" />
								<field name="hsfeURLstr" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
								<field name="pdfNumber" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
								<field name="tipoDocPdf" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
								<field name="tipoEmisionPdf" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
								<field name="puntoFacturacion" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
								<field name="api_token" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />
								<field name="total_precio_descuento" attrs="{'invisible': [('pagadoCompleto','!=','-000')]}" />


							</group>
							<group name="right_g" string="">
								<field name="fecha_inicio_contingencia" attrs="{'invisible':[('tipo_emision_fe','not in',('02', '04'))], 'required':[('tipo_emision_fe','in',('02', '04'))]}" />
								<field name="motivo_contingencia" attrs="{'invisible':[('tipo_emision_fe','not in',('02', '04'))],'required':[('tipo_emision_fe','in',('02', '04'))] }" />
								<field name="formatoCAFE_fe" />
								<field name="entregaCAFE_fe" />
								<field name="envioContenedor_fe" />
								<field name="procesoGeneracion_fe" />
								<field name="tipoSucursal_fe" />
							</group>
						</group>
					</page>
				</xpath>
			</field>
		</record>

		<record id="electronic_invoice_fields_inherit_tree" model="ir.ui.view">
			<field name="name">electronic.invoice.fields.inherit.tree</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_out_invoice_tree" />
			<field name="arch" type="xml">

				<xpath expr="//field[@name='state']" attrs="{'invisible': [('move_type','!=','out_invoice')]}" position="after">
					<field name="status_FE" invisible="context.get('default_move_type')  in ('out_refund', 'in_invoice', 'in_refund','in_receipt')" widget="badge" decoration-info="status_FE == 'Borrador'" decoration-danger="status_FE == 'Error'" decoration-warning="status_FE == 'Pendiente'" decoration-success="status_FE == 'Factura Creada'" />
				</xpath>
				<xpath expr="//field[@name='invoice_date']" attrs="{'invisible': [('move_type','!=','out_invoice')]}" position="after">
					<field name="lastFiscalNumber" invisible="context.get('default_move_type')  in ('out_refund', 'in_invoice', 'in_refund','in_receipt')" />
				</xpath>

			</field>
		</record>


		<record id="electronic_invoice_fields_nc_inherit_tree" model="ir.ui.view">
			<field name="name">electronic.invoice.fields.nc.inherit.tree</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_invoice_tree" />
			<field name="arch" type="xml">

				<xpath expr="//field[@name='state']" attrs="{'invisible': [('move_type','!=','out_refund')]}" position="after">
					<field name="status_FE" invisible="context.get('default_move_type')  in ('out_invoice','in_invoice', 'in_refund','in_receipt')" widget="badge" decoration-info="status_FE == 'Borrador'" decoration-danger="status_FE == 'Error'" decoration-warning="status_FE == 'Pendiente'" decoration-success="status_FE == 'Factura Creada'" />
				</xpath>
				<xpath expr="//field[@name='invoice_date']" attrs="{'invisible': [('move_type','!=','out_refund')]}" position="after">
					<field name="lastFiscalNumber" invisible="context.get('default_move_type')  in ('out_invoice','in_invoice', 'in_refund','in_receipt')" />
				</xpath>

			</field>
		</record>


		<record model="ir.actions.act_window" id="account_move_action_window">
			<field name="name">Bank Reconciliation</field>
			<field name="res_model">account.move</field>
			<field name="view_mode">tree,form</field>
		</record>


	</data>
</odoo>